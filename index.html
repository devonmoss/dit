<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Morse Code Trainer</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- Authentication UI (top-right toggle panel) -->
  <div id="auth-wrapper">
    <a id="auth-toggle">Login / Sign Up</a>
    <div id="auth-form" style="display:none;">
      <input id="email-input" type="email" placeholder="Email" />
      <input id="password-input" type="password" placeholder="Password" />
      <button id="signup-button">Sign Up</button>
      <button id="login-button">Log In</button>
      <button id="github-button">Sign In with GitHub</button>
      <div id="auth-error"></div>
    </div>
    <div id="auth-logged-in" style="display:none;">
      Logged in as <span id="user-email"></span>
      <button id="logout-button">Log Out</button>
    </div>
  </div>
  <!-- App content: always visible; login is optional -->
  <div id="app">
    <!-- Top horizontal navigation menu -->
    <nav id="top-menu">
      <div class="menu-wrapper">
        <div class="menu-section left">
        <label for="mode-copy" class="menu-item">
          <input type="radio" name="mode" id="mode-copy" value="copy" checked>
          copy
        </label>
        <label for="mode-send" class="menu-item">
          <input type="radio" name="mode" id="mode-send" value="send">
          send
        </label>
      </div>
      <div class="menu-section middle">
        <button class="menu-item" data-test-type="time" disabled>time</button>
        <button class="menu-item" data-test-type="words" disabled>words</button>
        <button class="menu-item active" data-test-type="training">training</button>
        <button class="menu-item" data-test-type="custom" disabled>custom</button>
      </div>
        <div class="menu-section right">
        <div id="level-selector" class="menu-item">
          <span id="current-level-display"></span>
          <ul id="levels-list" class="level-dropdown hidden"></ul>
        </div>
        <!-- Settings gear icon -->
        <button id="settings-toggle" class="menu-item">&#9881;</button>
        <ul id="settings-dropdown" class="settings-dropdown hidden">
          <li>
            <label for="speed-slider">Speed: <span id="speed-label"></span> WPM</label>
            <input type="range" id="speed-slider" min="5" max="40" step="1">
          </li>
          <li>
            <label for="volume-slider">Volume: <span id="volume-label"></span>%</label>
            <input type="range" id="volume-slider" min="0" max="100" step="1">
          </li>
          <li>
            <label for="send-speed-slider">Send Speed: <span id="send-speed-label"></span> WPM</label>
            <input type="range" id="send-speed-slider" min="5" max="40" step="1">
          </li>
          <li>
            <button id="view-progress-button" class="settings-item">My Progress</button>
          </li>
        </ul>
        </div>
      </div> <!-- /.menu-wrapper -->
    </nav>
    <div id="container">
      <button id="start-button">Start</button>
      <div id="current-level"></div>
      <div id="mastery-container"></div>
      <div id="progress"></div>
      <div id="status"></div>
      <div id="strikes"></div>
      <div id="controls">
        <button id="replay-button">Replay</button>
        <button id="hint-button">Hint</button>
      </div>
      <div id="hint"></div>
      <div id="results"></div>
    </div>
    <div id="action-hints"></div>
    <div id="progress-dashboard" style="display:none;"></div>
    <!-- Sending Trainer view -->
    <div id="sending-trainer" style="display:none;">
      <div id="send-current-meta">
        <div id="send-current-level" class="send-current-level"></div>
        <div id="send-current-char" class="send-current-char"></div>
      </div>
      <div id="send-mastery-container"></div>
      <div id="send-progress"></div>
      <div id="send-status"></div>
      <button id="send-start-button">Start</button>
      <div id="send-results"></div>
      <div id="sending-instructions">← <span class="dot">·</span> <span class="dash">–</span> → </div>
      <div id="keyer-output" class="keyer-output"></div>
      <div id="decoded-output" class="decoded-output"></div>
      <button id="send-clear-button">Clear</button>
    </div>
  </div> <!-- /#app -->
  <!-- Supabase configuration: replace placeholders with your project values -->
  <script>
    const SUPABASE_URL = 'https://kverifrebkciexkbkauq.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt2ZXJpZnJlYmtjaWV4a2JrYXVxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUwNzI2MDcsImV4cCI6MjA2MDY0ODYwN30.JHD_87VLGaURSuQeToyVhbDpss7FQZMMI3kB3rsUYmU';
  </script>
  <!-- Supabase JS client -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- Levels definitions -->
  <script src="levels.js"></script>
  <!-- Authentication logic -->
  <script src="auth.js"></script>
  <!-- Main application script -->
  <script src="script.js"></script>
</body>

</html>
