<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Morse Code Trainer</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- Authentication UI (top-right toggle panel) -->
  <div id="auth-wrapper">
    <a id="auth-toggle">Login / Sign Up</a>
    <div id="auth-form" style="display:none;">
      <input id="email-input" type="email" placeholder="Email" />
      <input id="password-input" type="password" placeholder="Password" />
      <button id="signup-button">Sign Up</button>
      <button id="login-button">Log In</button>
      <button id="github-button">Sign In with GitHub</button>
      <div id="auth-error"></div>
    </div>
    <div id="auth-logged-in" style="display:none;">
      Logged in as <span id="user-email"></span>
      <button id="logout-button">Log Out</button>
    </div>
  </div>
  <!-- App content: always visible; login is optional -->
  <div id="app">
    <button id="menu-toggle">☰</button>
    <div id="menu">
      <div id="menu-tabs">
        <button id="main-tab" class="tab-button active">Main</button>
        <button id="options-tab" class="tab-button">Options</button>
      </div>
      <div id="main-panel" class="menu-panel active">
        <div id="levels-list-container">
          <ul id="levels-list"></ul>
        </div>
        <button id="view-progress-button">My Progress</button>
        <button id="sending-button">WIP: Sending Trainer</button>
      </div>
      <div id="options-panel" class="menu-panel">
        <label for="speed-slider">Speed: <span id="speed-label"></span></label>
        <input type="range" id="speed-slider" min="5" max="40" step="1">
        <label for="volume-slider">Volume: <span id="volume-label"></span></label>
        <input type="range" id="volume-slider" min="0" max="100" step="1">
        <label for="noise-slider">Noise: <span id="noise-label">10%</span></label>
        <input type="range" id="noise-slider" min="0" max="100" step="1" value="10">
        <label for="distortion-slider">Distortion: <span id="distortion-label">10</span></label>
        <input type="range" id="distortion-slider" min="0" max="50" step="1" value="10">
      </div>
    </div>
    <div id="container">
      <button id="start-button">Start</button>
      <div id="current-level"></div>
      <div id="mastery-container"></div>
      <div id="progress"></div>
      <div id="status"></div>
      <div id="strikes"></div>
      <div id="controls">
        <button id="replay-button">Replay</button>
        <button id="hint-button">Hint</button>
      </div>
      <div id="hint"></div>
      <div id="results"></div>
    </div>
    <div id="action-hints"></div>
    <div id="progress-dashboard" style="display:none;"></div>
    <!-- Sending Trainer view -->
    <div id="sending-trainer" style="display:none;">
      <button id="back-from-sending">← Back</button>
      <h2>Sending Trainer</h2>
      <div id="sending-instructions">← <span class="dot">·</span> <span class="dash">–</span> → </div>
      <label for="send-speed-slider">Speed: <span id="send-speed-label"></span> WPM</label>
      <input type="range" id="send-speed-slider" min="5" max="40" step="1">
      <div id="keyer-output" class="keyer-output"></div>
      <div id="decoded-output" class="decoded-output"></div>
      <button id="send-clear-button">Clear</button>
    </div>
  </div> <!-- /#app -->
  <!-- Supabase configuration: replace placeholders with your project values -->
  <script>
    const SUPABASE_URL = 'https://kverifrebkciexkbkauq.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt2ZXJpZnJlYmtjaWV4a2JrYXVxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUwNzI2MDcsImV4cCI6MjA2MDY0ODYwN30.JHD_87VLGaURSuQeToyVhbDpss7FQZMMI3kB3rsUYmU';
  </script>
  <!-- Supabase JS client -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- Levels definitions -->
  <script src="levels.js"></script>
  <!-- Authentication logic -->
  <script src="auth.js"></script>
  <!-- Main application script -->
  <script src="script.js"></script>
</body>

</html>
